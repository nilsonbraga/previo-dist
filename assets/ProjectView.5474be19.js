import{m as Ve,f as P,g as $,k as j,L as F,M as oe,c as C,i as t,h as i,u as n,G as q,F as S,o as _,a as d,t as p,H as te,b as L,d as Ee}from"./index.2a01bdce.js";import{_ as s,b as _e,D as Ie,E as Te,a as Ce,F as ge,G as Pe}from"./auth.75b214dc.js";import{_ as je,b as Se,a as Ne,c as Ue}from"./SectionTitleLineWithButton.6f9ec719.js";import{_ as k,a as De}from"./CardBoxModal.747049bb.js";import{u as Y}from"./component.317f724c.js";import{_ as N}from"./BaseButtons.19f47afb.js";import{C as Oe,_ as f,a as A}from"./CardBox.bca85cc1.js";import{_ as r}from"./FormField.75048a21.js";import{u as ae}from"./dimension.cdad6a00.js";import{u as ie}from"./initiative.3f4a173b.js";import{u as re}from"./project.b6eecae0.js";import{u as ne}from"./vulnerability.3e96a3e0.js";import"./api.5a77c80b.js";const ye={class:"pt-8"},Re={class:"pt-8"},$e=d("p",null,"Ao excluir um item, suas depend\xEAncias tamb\xE9m ser\xE3o exclu\xEDdas automaticamente.",-1),Fe={class:"pt-8"},Le=d("b",null,"verifique se o mesmo j\xE1 existe",-1),ke={class:"flex"},Ae={class:"flex"},Me={class:"flex"},He=d("th",null,null,-1),we={class:"lg:w-1 whitespace-nowrap"},Je={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},Be={props:{clearMethod:{type:Function}},computed:{...Ve(Y,{components:"components"})},async mounted(){this.FETCH_INITIATIVES(),this.FETCH_COMPONENTS(),this.FETCH_DIMENSIONS(),this.FETCH_PROJECTS(),this.FETCH_VULNERABILITIES()},methods:{...P(Y,["FETCH_COMPONENT","FETCH_COMPONENTS","DELETE_COMPONENT","UPDATE_COMPONENT"]),...P(ae,["FETCH_DIMENSION","FETCH_DIMENSIONS","DELETE_DIMENSION","UPDATE_DIMENSION","FILTER_DIMENSIONS"]),...P(ie,["FETCH_INITIATIVE","FETCH_INITIATIVES","DELETE_INITIATIVE","UPDATE_INITIATIVE","FILTER_INITIATIVES"]),...P(re,["FETCH_PROJECT","FETCH_PROJECTS","DELETE_PROJECT","UPDATE_PROJECT","FILTER_PROJECTS","RESET_ERRORS"]),...P(ne,["FETCH_VULNERABILITIES","FETCH_VULNERABILITY","DELETE_VULNERABILITY","UPDATE_VULNERABILITY"])},data(){return{columns:[{name:"title",title:"T\xEDtulo"},{name:"description",title:"Descri\xE7\xE3o"}]}},components:{CardBoxComponentFooter:Oe}},tl=Object.assign(Be,{__name:"ProjectView",setup(Ge){const g=Y(),V=ae(),v=ie(),u=re(),U=ne(),a=$(()=>u.errors);U.$reset(),g.$reset(),V.$reset(),v.$reset(),u.$reset();let z=V.dimensions,K=v.initiatives,Q=u.projects;const D=j([]),W=o=>{V.FILTER_DIMENSIONS(o),z=V.filteredDimensions,console.log(z)},X=o=>{v.FILTER_INITIATIVES(o),K=v.filteredInitiatives,console.log(K)},O=o=>{u.FILTER_PROJECTS(o),Q=u.filteredProjects,console.log(Q)};F(()=>u.filteredProjects,()=>{const o=u.filteredProjects;D.value=o,I.value=0,Z()});const y=j(5),I=j(0),Z=()=>{const o=y.value*I.value,e=o+y.value;h.value=D.value.slice(o,e)};F([D,y,I],Z);const R=j("");F(R,()=>{I.value=0});const h=j([]),x=$(()=>Math.ceil(D.value.length/y.value)),se=$(()=>I.value+1),ue=$(()=>{const o=[];for(let e=0;e<x.value;e++)o.push(e);return o}),de=o=>{g.FETCH_COMPONENT(o)},me=o=>{V.FETCH_DIMENSION(o)},pe=o=>{v.FETCH_INITIATIVE(o)},M=o=>{u.FETCH_PROJECT(o)},ve=()=>{u.DELETE_PROJECT(u.selectedProject.id),O(u.selectedProject.initiative_id)},ee=(o,e)=>{const l=o.find(T=>T.id===e);return l?l.description:null},c=oe({info:!1,new:!1,edit:!1,delete:!1}),b=o=>{c[o]=!c[o],v.RESET_ERRORS()};F(()=>u.selectedProject,o=>{Object.assign(m,{...le,...o})});const le={component_id:null,dimension_id:null,initiative_id:null,vulnerability_id:null,title:"",description:"",reason:"",main_goal:"",project_output:"",goals:"",expected_results:"",indicators:""},m=oe({...le}),fe=async()=>{const{initiative_id:o,vulnerability_id:e,title:l,description:T,reason:E,main_goal:H,project_output:w,goals:J,expected_results:B,indicators:G}=m;await u.UPDATE_PROJECT(u.selectedProject.id,o,e,l,T,E,H,w,J,B,G)&&(b("edit"),O(u.selectedProject.initiative_id))},ce=async(o,e,l,T,E,H,w,J,B,G)=>{await u.CREATE_PROJECT(o,e,l,T,E,H,w,J,B,G)&&(b("new"),O(o))};return(o,e)=>(_(),C(S,null,[t(k,{modelValue:c.info,"onUpdate:modelValue":e[0]||(e[0]=l=>c.info=l),title:n(u).selectedProject.title},{default:i(()=>[d("p",null,"Descri\xE7\xE3o: "+p(n(u).selectedProject.description),1),d("p",null,"Justificativa: "+p(n(u).selectedProject.reason),1),d("p",null,"Objetivo Geral: "+p(n(u).selectedProject.main_goal),1),d("p",null,"Produto/Servi\xE7o do Projeto: "+p(n(u).selectedProject.project_output),1),d("p",null,"Metas: "+p(n(u).selectedProject.goals),1),d("p",null,"Resultados Esperados: "+p(n(u).selectedProject.expected_results),1),d("p",null,"Indicadores: "+p(n(u).selectedProject.indicators),1),d("p",null," Vulnerabilidade: "+p(ee(n(U).vulnerabilities,n(u).selectedProject.vulnerability_id)),1),d("p",null," Iniciativa: "+p(ee(n(v).initiatives,n(u).selectedProject.initiative_id)),1)]),_:1},8,["modelValue","title"]),t(k,{class:"xl:w-4/20",modelValue:c.new,"onUpdate:modelValue":e[16]||(e[16]=l=>c.new=l),title:"Adicionar Novo Projeto",button:o.info,"is-form":"",onSubmit:e[17]||(e[17]=q(l=>ce(o.initiative_id,o.vulnerability_id,o.title,o.description,o.reason,o.main_goal,o.project_output,o.goals,o.expected_results,o.indicators),["prevent"]))},{footer:i(()=>[d("div",ye,[t(N,null,{default:i(()=>[t(f,{label:"Confirmar",color:"info",type:"submit"}),t(f,{label:"Cancelar",color:"info",outline:"",onClick:e[15]||(e[15]=l=>b("new"))})]),_:1})])]),default:i(()=>[t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Selecione o Componente",class:"mb-0"},{default:i(()=>[t(s,{modelValue:o.component_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o.component_id=l),name:"component_id",options:n(g).components,onChange:e[2]||(e[2]=l=>W(o.component_id))},null,8,["modelValue","options"])]),_:1}),t(r,{label:"Selecione a Dimens\xE3o",class:"mb-0"},{default:i(()=>[t(s,{modelValue:o.dimension_id,"onUpdate:modelValue":e[3]||(e[3]=l=>o.dimension_id=l),name:"dimension_id",options:n(V).filteredDimensions,onChange:e[4]||(e[4]=l=>X(o.dimension_id))},null,8,["modelValue","options"])]),_:1})]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Selecione a Iniciativa a qual deseja vincular",class:"mb-0",help:a.value.initiative_id,error:a.value.initiative_id},{default:i(()=>[t(s,{modelValue:o.initiative_id,"onUpdate:modelValue":e[5]||(e[5]=l=>o.initiative_id=l),name:"initiative_id",options:n(v).filteredInitiatives,error:a.value.initiative_id},null,8,["modelValue","options","error"])]),_:1},8,["help","error"]),t(r,{label:"Vulnerabilidade",class:"mb-0",help:a.value.vulnerability_id,error:a.value.vulnerability_id},{default:i(()=>[t(s,{modelValue:o.vulnerability_id,"onUpdate:modelValue":e[6]||(e[6]=l=>o.vulnerability_id=l),name:"vulnerability_id",options:n(U).vulnerabilities,error:a.value.vulnerability_id},null,8,["modelValue","options","error"])]),_:1},8,["help","error"])]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"T\xEDtulo",class:"mb-0",help:a.value.title,error:a.value.title},{default:i(()=>[t(s,{modelValue:o.title,"onUpdate:modelValue":e[7]||(e[7]=l=>o.title=l),name:o.title,error:a.value.title},null,8,["modelValue","name","error"])]),_:1},8,["help","error"]),t(r,{label:"Descri\xE7\xE3o",class:"mb-0",help:a.value.description,error:a.value.description},{default:i(()=>[t(s,{modelValue:o.description,"onUpdate:modelValue":e[8]||(e[8]=l=>o.description=l),name:"description",error:a.value.description},null,8,["modelValue","error"])]),_:1},8,["help","error"])]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Justificativa",class:"mb-0",help:a.value.reason,error:a.value.reason},{default:i(()=>[t(s,{modelValue:o.reason,"onUpdate:modelValue":e[9]||(e[9]=l=>o.reason=l),name:"reason",error:a.value.reason},null,8,["modelValue","error"])]),_:1},8,["help","error"]),t(r,{label:"Objetivo Geral",class:"mb-0",help:a.value.main_goal,error:a.value.main_goal},{default:i(()=>[t(s,{modelValue:o.main_goal,"onUpdate:modelValue":e[10]||(e[10]=l=>o.main_goal=l),name:"main_goal",error:a.value.main_goal},null,8,["modelValue","error"])]),_:1},8,["help","error"])]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Produto/Servi\xE7o do Projeto",class:"mb-0",help:a.value.project_output,error:a.value.project_output},{default:i(()=>[t(s,{modelValue:o.project_output,"onUpdate:modelValue":e[11]||(e[11]=l=>o.project_output=l),name:"project_output",error:a.value.project_output},null,8,["modelValue","error"])]),_:1},8,["help","error"]),t(r,{label:"Metas",class:"mb-0",help:a.value.goals,error:a.value.goals},{default:i(()=>[t(s,{modelValue:o.goals,"onUpdate:modelValue":e[12]||(e[12]=l=>o.goals=l),name:"goals",error:a.value.goals},null,8,["modelValue","error"])]),_:1},8,["help","error"])]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Resultados Esperados",class:"mb-0",help:a.value.expected_results,error:a.value.expected_results},{default:i(()=>[t(s,{modelValue:o.expected_results,"onUpdate:modelValue":e[13]||(e[13]=l=>o.expected_results=l),name:"expected_results",error:a.value.expected_results},null,8,["modelValue","error"])]),_:1},8,["help","error"]),t(r,{label:"Indicadores",class:"mb-0",help:a.value.indicators,error:a.value.indicators},{default:i(()=>[t(s,{modelValue:o.indicators,"onUpdate:modelValue":e[14]||(e[14]=l=>o.indicators=l),name:"indicators",error:a.value.indicators},null,8,["modelValue","error"])]),_:1},8,["help","error"])]),_:1})]),_:1},8,["modelValue","button"]),t(k,{modelValue:c.edit,"onUpdate:modelValue":e[29]||(e[29]=l=>c.edit=l),title:"Editar Projeto",button:"warning","is-form":"",onSubmit:e[30]||(e[30]=q(l=>fe(),["prevent"]))},{footer:i(()=>[d("div",Re,[t(N,null,{default:i(()=>[t(f,{label:"Confirmar",color:"warning",type:"submit"}),t(f,{label:"Cancelar",color:"warning",outline:"",onClick:e[28]||(e[28]=l=>b("edit"))})]),_:1})])]),default:i(()=>[t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Selecione a Iniciativa a qual deseja vincular",class:"mb-0",help:a.value.initiative_id,error:a.value.initiative_id},{default:i(()=>[t(s,{modelValue:m.initiative_id,"onUpdate:modelValue":e[18]||(e[18]=l=>m.initiative_id=l),name:"form.initiative_id",options:n(v).filteredInitiatives,error:a.value.initiative_id},null,8,["modelValue","options","error"])]),_:1},8,["help","error"]),t(r,{label:"Vulnerabilidade",class:"mb-0",help:a.value.vulnerability_id,error:a.value.vulnerability_id},{default:i(()=>[t(s,{modelValue:m.vulnerability_id,"onUpdate:modelValue":e[19]||(e[19]=l=>m.vulnerability_id=l),name:"form.vulnerability_id",options:n(U).vulnerabilities,error:a.value.vulnerability_id},null,8,["modelValue","options","error"])]),_:1},8,["help","error"])]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"T\xEDtulo",class:"mb-0",help:a.value.title,error:a.value.title},{default:i(()=>[t(s,{modelValue:m.title,"onUpdate:modelValue":e[20]||(e[20]=l=>m.title=l),name:m.title,error:a.value.title},null,8,["modelValue","name","error"])]),_:1},8,["help","error"]),t(r,{label:"Descri\xE7\xE3o",class:"mb-0",help:a.value.description,error:a.value.description},{default:i(()=>[t(s,{modelValue:m.description,"onUpdate:modelValue":e[21]||(e[21]=l=>m.description=l),name:"form.description",error:a.value.description},null,8,["modelValue","error"])]),_:1},8,["help","error"])]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Justificativa",class:"mb-0",help:a.value.reason,error:a.value.reason},{default:i(()=>[t(s,{modelValue:m.reason,"onUpdate:modelValue":e[22]||(e[22]=l=>m.reason=l),name:"form.reason",error:a.value.reason},null,8,["modelValue","error"])]),_:1},8,["help","error"]),t(r,{label:"Objetivo Geral",class:"mb-0",help:a.value.main_goal,error:a.value.main_goal},{default:i(()=>[t(s,{modelValue:m.main_goal,"onUpdate:modelValue":e[23]||(e[23]=l=>m.main_goal=l),name:"form.main_goal",error:a.value.main_goal},null,8,["modelValue","error"])]),_:1},8,["help","error"])]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Produto/Servi\xE7o do Projeto",class:"mb-0",help:a.value.project_output,error:a.value.project_output},{default:i(()=>[t(s,{modelValue:m.project_output,"onUpdate:modelValue":e[24]||(e[24]=l=>m.project_output=l),name:"form.project_output",error:a.value.project_output},null,8,["modelValue","error"])]),_:1},8,["help","error"]),t(r,{label:"Metas",class:"mb-0",help:a.value.goals,error:a.value.goals},{default:i(()=>[t(s,{modelValue:m.goals,"onUpdate:modelValue":e[25]||(e[25]=l=>m.goals=l),name:"form.goals",error:a.value.goals},null,8,["modelValue","error"])]),_:1},8,["help","error"])]),_:1}),t(r,{class:"mb-0"},{default:i(()=>[t(r,{label:"Resultados Esperados",class:"mb-0",help:a.value.expected_results,error:a.value.expected_results},{default:i(()=>[t(s,{modelValue:m.expected_results,"onUpdate:modelValue":e[26]||(e[26]=l=>m.expected_results=l),name:"form.expected_results",error:a.value.expected_results},null,8,["modelValue","error"])]),_:1},8,["help","error"]),t(r,{label:"Indicadores",class:"mb-0",help:a.value.indicators,error:a.value.indicators},{default:i(()=>[t(s,{modelValue:m.indicators,"onUpdate:modelValue":e[27]||(e[27]=l=>m.indicators=l),name:"form.indicators",error:a.value.indicators},null,8,["modelValue","error"])]),_:1},8,["help","error"])]),_:1})]),_:1},8,["modelValue"]),t(k,{modelValue:c.delete,"onUpdate:modelValue":e[33]||(e[33]=l=>c.delete=l),isForm:"",onSubmit:e[34]||(e[34]=q(l=>ve(),["prevent"])),title:"Voc\xEA realmente quer excluir este item?",button:"danger"},{footer:i(()=>[d("div",Fe,[t(N,null,{default:i(()=>[t(f,{label:"Confirmar",color:"danger",type:"submit",onClick:e[31]||(e[31]=l=>b("delete"))}),t(f,{label:"Cancelar",color:"danger",outline:"",onClick:e[32]||(e[32]=l=>b("delete"))})]),_:1})])]),default:i(()=>[$e]),_:1},8,["modelValue"]),t(je,null,{default:i(()=>[t(Se,null,{default:i(()=>[t(Ne,{icon:n(_e),title:"Projetos",main:""},{default:i(()=>[t(f,{icon:n(Ie),label:"Novo Projeto",color:"contrast","rounded-full":"",small:"",onClick:e[35]||(e[35]=l=>b("new"))},null,8,["icon"])]),_:1},8,["icon"]),t(De,{color:"info",icon:n(Te)},{default:i(()=>[te(" Antes de cadastrar um novo projeto, "),Le,te(". ")]),_:1},8,["icon"]),t(A,{class:"mb-6"},{default:i(()=>[t(r,{label:"Selecione o Componente"},{default:i(()=>[d("div",ke,[t(s,{class:"basis-1/4 mr-4",modelValue:o.component,"onUpdate:modelValue":e[36]||(e[36]=l=>o.component=l),name:R.value,options:n(g).components,onChange:e[37]||(e[37]=l=>{de(o.component),W(o.component)})},null,8,["modelValue","name","options"]),t(s,{class:"basis-3/4",disabled:"",value:n(g).selectedComponent.id,placeholder:n(g).selectedComponent.description,modelValue:o.selectedComponent,"onUpdate:modelValue":e[38]||(e[38]=l=>o.selectedComponent=l)},null,8,["value","placeholder","modelValue"])])]),_:1})]),_:1}),t(A,{class:"mb-6"},{default:i(()=>[t(r,{label:"Selecione a Dimens\xE3o"},{default:i(()=>[d("div",Ae,[t(s,{class:"basis-1/4 mr-4",modelValue:o.dimension,"onUpdate:modelValue":e[39]||(e[39]=l=>o.dimension=l),name:R.value,options:n(V).filteredDimensions,onChange:e[40]||(e[40]=l=>{me(o.dimension),X(o.dimension)})},null,8,["modelValue","name","options"]),t(s,{class:"basis-3/4",disabled:"",value:n(V).selectedDimension.id,placeholder:n(V).selectedDimension.description,modelValue:o.selectedDimension,"onUpdate:modelValue":e[41]||(e[41]=l=>o.selectedDimension=l)},null,8,["value","placeholder","modelValue"])])]),_:1})]),_:1}),t(A,{class:"mb-6"},{default:i(()=>[t(r,{label:"Selecione a Iniciativa"},{default:i(()=>[d("div",Me,[t(s,{class:"basis-1/4 mr-4",modelValue:o.initiative,"onUpdate:modelValue":e[42]||(e[42]=l=>o.initiative=l),name:R.value,options:n(v).filteredInitiatives,onChange:e[43]||(e[43]=l=>{pe(o.initiative),O(o.initiative)})},null,8,["modelValue","name","options"]),t(s,{class:"basis-3/4",disabled:"",value:n(v).selectedInitiative.id,placeholder:n(v).selectedInitiative.description,modelValue:o.selectedInitiative,"onUpdate:modelValue":e[44]||(e[44]=l=>o.selectedInitiative=l)},null,8,["value","placeholder","modelValue"])])]),_:1})]),_:1}),t(A,{class:"mb-6","has-table":""},{default:i(()=>[d("table",null,[d("thead",null,[d("tr",null,[(_(!0),C(S,null,L(o.columns,l=>(_(),C("th",{key:l},p(l.title),1))),128)),He])]),d("tbody",null,[(_(!0),C(S,null,L(h.value,(l,T)=>(_(),C("tr",{key:T},[(_(!0),C(S,null,L(o.columns,E=>(_(),C("td",{key:E},p(l[E.name]),1))),128)),d("td",we,[t(N,{type:"justify-start lg:justify-end","no-wrap":""},{default:i(()=>[t(f,{color:"info",icon:n(Ce),small:"",onClick:E=>(M(l.id),b("info"))},null,8,["icon","onClick"]),t(f,{color:"warning",icon:n(ge),small:"",onClick:E=>(M(l.id),b("edit"))},null,8,["icon","onClick"]),t(f,{color:"danger",icon:n(Pe),small:"",onClick:E=>(M(l.id),b("delete"))},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),d("div",Je,[t(Ue,null,{default:i(()=>[t(N,null,{default:i(()=>[(_(!0),C(S,null,L(ue.value,l=>(_(),Ee(f,{key:l,active:l===I.value,label:l+1,color:l===I.value?"lightDark":"whiteDark",small:"",onClick:T=>I.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),d("small",null,"P\xE1gina "+p(se.value)+" de "+p(x.value),1)]),_:1})])]),_:1})]),_:1})]),_:1})],64))}});export{tl as default};
