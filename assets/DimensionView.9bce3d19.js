import{f as A,g as $,k as N,L as k,M as j,c as v,i as n,h as t,G as y,F as S,o as c,a,t as V,u as p,H as B,b as M,d as Y}from"./index.2a01bdce.js";import{_ as E,b as Z,D as x,E as ee,a as le,F as oe,G as ne}from"./auth.75b214dc.js";import{_ as te,b as ie,a as se,c as ae}from"./SectionTitleLineWithButton.6f9ec719.js";import{_ as w,a as re}from"./CardBoxModal.747049bb.js";import{u as h}from"./component.317f724c.js";import{_ as T}from"./BaseButtons.19f47afb.js";import{C as ue,_ as r,a as q}from"./CardBox.bca85cc1.js";import{_ as C}from"./FormField.75048a21.js";import{u as G}from"./dimension.cdad6a00.js";import"./api.5a77c80b.js";const de={class:"pt-8"},me={class:"pt-8"},pe=a("p",null,"Ao excluir um item, suas depend\xEAncias tamb\xE9m ser\xE3o exclu\xEDdas automaticamente.",-1),ce={class:"pt-8"},fe=a("b",null,"verifique se o mesmo j\xE1 existe",-1),ve={class:"flex"},Ee=a("th",null,null,-1),_e={class:"lg:w-1 whitespace-nowrap"},Ce={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},be={async mounted(){this.FETCH_COMPONENTS(),this.FETCH_DIMENSIONS()},methods:{...A(h,["FETCH_COMPONENT","FETCH_COMPONENTS","DELETE_COMPONENT","UPDATE_COMPONENT","RESET_ERRORS"]),...A(G,["FETCH_DIMENSION","FETCH_DIMENSIONS","DELETE_DIMENSION","UPDATE_DIMENSION","FILTER_DIMENSIONS","RESET_ERRORS"])},data(){return{columns:[{name:"title",title:"T\xEDtulo"},{name:"description",title:"Descri\xE7\xE3o"},{name:"component_id",title:"Componente"}]}},components:{CardBoxComponentFooter:ue}},we=Object.assign(be,{__name:"DimensionView",setup(De){const _=h(),i=G(),s=$(()=>i.errors);_.$reset(),i.$reset();const O=N([]),g=o=>{i.FILTER_DIMENSIONS(o)};k(()=>i.filteredDimensions,()=>{const o=i.filteredDimensions;O.value=o,f.value=0,F()});const I=N(5),f=N(0),F=()=>{const o=I.value*f.value,e=o+I.value;U.value=O.value.slice(o,e)};k([O,I,f],F);const R=N("");k(R,()=>{f.value=0});const U=N([]),H=$(()=>Math.ceil(O.value.length/I.value)),z=$(()=>f.value+1),J=$(()=>{const o=[];for(let e=0;e<H.value;e++)o.push(e);return o}),K=o=>{_.FETCH_COMPONENT(o)},P=o=>{i.FETCH_DIMENSION(o)},Q=()=>{i.DELETE_DIMENSION(i.selectedDimension.id),g(i.selectedDimension.component_id)},u=j({info:!1,new:!1,edit:!1,delete:!1}),d=o=>{u[o]=!u[o],i.RESET_ERRORS()};k(()=>i.selectedDimension,o=>{Object.assign(m,{...L,...o})});const L={title:"",description:""},m=j({...L}),W=async()=>{const{title:o,description:e}=m;if(await i.UPDATE_DIMENSION(i.selectedDimension.id,o,e)){d("edit");const b=i.selectedDimension.component_id;g(b)}},X=async(o,e,l)=>{await i.CREATE_DIMENSION(o,e,l)&&(d("new"),g(l))};return(o,e)=>(c(),v(S,null,[n(w,{modelValue:u.info,"onUpdate:modelValue":e[0]||(e[0]=l=>u.info=l),title:m.title},{default:t(()=>[a("p",null,V(m.description),1)]),_:1},8,["modelValue","title"]),n(w,{modelValue:u.new,"onUpdate:modelValue":e[5]||(e[5]=l=>u.new=l),title:"Adicionar Nova Dimens\xE3o",button:o.info,"is-form":"",onSubmit:e[6]||(e[6]=y(l=>X(o.title,o.description,o.component_id),["prevent"]))},{footer:t(()=>[a("div",de,[n(T,null,{default:t(()=>[n(r,{label:"Confirmar",color:"info",type:"submit"}),n(r,{label:"Cancelar",color:"info",outline:"",onClick:e[4]||(e[4]=l=>d("new"))})]),_:1})])]),default:t(()=>[n(C,{label:"Selecione o Componente ao qual deseja vincular",help:s.value.component_id,error:s.value.component_id},{default:t(()=>[n(E,{modelValue:o.component_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o.component_id=l),name:"component_id",options:p(_).components,error:s.value.component_id},null,8,["modelValue","options","error"])]),_:1},8,["help","error"]),n(C,{label:"T\xEDtulo",help:s.value.title,error:s.value.title},{default:t(()=>[n(E,{modelValue:o.title,"onUpdate:modelValue":e[2]||(e[2]=l=>o.title=l),name:o.title,error:s.value.title},null,8,["modelValue","name","error"])]),_:1},8,["help","error"]),n(C,{label:"Descri\xE7\xE3o",help:s.value.description,error:s.value.description},{default:t(()=>[n(E,{modelValue:o.description,"onUpdate:modelValue":e[3]||(e[3]=l=>o.description=l),name:o.description,error:s.value.description},null,8,["modelValue","name","error"])]),_:1},8,["help","error"])]),_:1},8,["modelValue","button"]),n(w,{modelValue:u.edit,"onUpdate:modelValue":e[10]||(e[10]=l=>u.edit=l),title:"Editar Dimens\xE3o",button:"warning","is-form":"",onSubmit:e[11]||(e[11]=y(l=>W(),["prevent"]))},{footer:t(()=>[a("div",me,[n(T,null,{default:t(()=>[n(r,{label:"Confirmar",color:"warning",type:"submit"}),n(r,{label:"Cancelar",color:"warning",outline:"",onClick:e[9]||(e[9]=l=>d("edit"))})]),_:1})])]),default:t(()=>[n(C,{label:"T\xEDtulo",help:s.value.title,error:s.value.title},{default:t(()=>[n(E,{modelValue:m.title,"onUpdate:modelValue":e[7]||(e[7]=l=>m.title=l),name:m.title,error:s.value.title},null,8,["modelValue","name","error"])]),_:1},8,["help","error"]),n(C,{label:"Descri\xE7\xE3o",help:s.value.description,error:s.value.description},{default:t(()=>[n(E,{modelValue:m.description,"onUpdate:modelValue":e[8]||(e[8]=l=>m.description=l),name:m.description,error:s.value.description},null,8,["modelValue","name","error"])]),_:1},8,["help","error"])]),_:1},8,["modelValue"]),n(w,{modelValue:u.delete,"onUpdate:modelValue":e[14]||(e[14]=l=>u.delete=l),isForm:"",onSubmit:e[15]||(e[15]=y(l=>Q(),["prevent"])),title:"Voc\xEA realmente quer excluir este item?",button:"danger"},{footer:t(()=>[a("div",ce,[n(T,null,{default:t(()=>[n(r,{label:"Confirmar",color:"danger",type:"submit",onClick:e[12]||(e[12]=l=>d("delete"))}),n(r,{label:"Cancelar",color:"danger",outline:"",onClick:e[13]||(e[13]=l=>d("delete"))})]),_:1})])]),default:t(()=>[pe]),_:1},8,["modelValue"]),n(te,null,{default:t(()=>[n(ie,null,{default:t(()=>[n(se,{icon:p(Z),title:"Dimens\xF5es",main:""},{default:t(()=>[n(r,{icon:p(x),label:"Nova Dimens\xE3o",color:"contrast","rounded-full":"",small:"",onClick:e[16]||(e[16]=l=>d("new"))},null,8,["icon"])]),_:1},8,["icon"]),n(re,{color:"info",icon:p(ee)},{default:t(()=>[B(" Antes de cadastrar uma nova dimens\xE3o, "),fe,B(". ")]),_:1},8,["icon"]),n(q,{class:"mb-6"},{default:t(()=>[n(C,{label:"Selecione o Componente"},{default:t(()=>[a("div",ve,[n(E,{class:"basis-1/4 mr-4",modelValue:o.component,"onUpdate:modelValue":e[17]||(e[17]=l=>o.component=l),name:R.value,options:p(_).components,onChange:e[18]||(e[18]=l=>{K(o.component),g(o.component)})},null,8,["modelValue","name","options"]),n(E,{class:"basis-3/4",disabled:"",value:p(_).selectedComponent.id,placeholder:p(_).selectedComponent.description,modelValue:o.component_name,"onUpdate:modelValue":e[19]||(e[19]=l=>o.component_name=l)},null,8,["value","placeholder","modelValue"])])]),_:1})]),_:1}),n(q,{class:"mb-6","has-table":""},{default:t(()=>[a("table",null,[a("thead",null,[a("tr",null,[(c(!0),v(S,null,M(o.columns,l=>(c(),v("th",{key:l},V(l.title),1))),128)),Ee])]),a("tbody",null,[(c(!0),v(S,null,M(U.value,(l,b)=>(c(),v("tr",{key:b},[(c(!0),v(S,null,M(o.columns,D=>(c(),v("td",{key:D},V(l[D.name]),1))),128)),a("td",_e,[n(T,{type:"justify-start lg:justify-end","no-wrap":""},{default:t(()=>[n(r,{color:"info",icon:p(le),small:"",onClick:D=>(P(l.id),d("info"))},null,8,["icon","onClick"]),n(r,{color:"warning",icon:p(oe),small:"",onClick:D=>(P(l.id),d("edit"))},null,8,["icon","onClick"]),n(r,{color:"danger",icon:p(ne),small:"",onClick:D=>(P(l.id),d("delete"))},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),a("div",Ce,[n(ae,null,{default:t(()=>[n(T,null,{default:t(()=>[(c(!0),v(S,null,M(J.value,l=>(c(),Y(r,{key:l,active:l===f.value,label:l+1,color:l===f.value?"lightDark":"whiteDark",small:"",onClick:b=>f.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),a("small",null,"P\xE1gina "+V(z.value)+" de "+V(H.value),1)]),_:1})])]),_:1})]),_:1})]),_:1})],64))}});export{we as default};
