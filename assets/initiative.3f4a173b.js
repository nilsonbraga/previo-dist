import{K as o,j as n}from"./index.2a01bdce.js";import{a}from"./api.5a77c80b.js";const s=o(),r="https://hgprevio.vicegov.ce.gov.br/api/v1",T="FETCH_INITIATIVES",c="FETCH_INITIATIVE",E="DELETE_INITIATIVE",v="CLEAR_SELECTED_INITIATIVE",h="UPDATE_INITIATIVE",l="CREATE_INITIATIVE",u="FILTER_INITIATIVES",d="RESET_INITIATIVES",A="RESET_ERRORS",N=n("initiatives",{state:()=>({initiatives:[],selectedInitiative:[],filteredInitiatives:[],isFieldFocusRegistered:!1,errors:{}}),getters:{getInitiatives:i=>i.initiatives,getInitiative:i=>i.selectedInitiative},actions:{validateTitle(i){const t={};return(!i||i.trim()==="")&&(t.title="O T\xEDtulo \xE9 obrigat\xF3rio"),this.errors=t,!Object.keys(t).length},validateDescription(i){const t={};return(!i||i.trim()==="")&&(t.description="A Descri\xE7\xE3o \xE9 obrigat\xF3ria"),this.errors=t,!Object.keys(t).length},validateDimensionId(i){const t={};return i||(t.dimension_id="O Componente \xE9 obrigat\xF3rio"),this.errors=t,!Object.keys(t).length},async[T](){try{const i=await a.get(`${r}/initiatives`);this.initiatives=i.data}catch(i){this.errors.api=i.message}},[d](){Object.assign(this,defaultState)},[A](){this.errors={}},[u](i){this.filteredInitiatives=this.initiatives;let e=this.initiatives.filter(I=>I.dimension_id==i);this.filteredInitiatives=e},async[c](i){try{const t=await a.get(`${r}/initiatives/${i}`);this.selectedInitiative=t.data}catch(t){this.errors.api=t.message}},async[v](){this.selectedInitiative=[]},async[l](i,t,e){if(this.validateDimensionId(e)&&this.validateTitle(i)&&this.validateDescription(t))try{return await a.post(`${r}/initiatives/`,{title:i,description:t,dimension_id:e}),await this.FETCH_INITIATIVES(),this.FILTER_INITIATIVES(e),s.success("Iniciativa criada com sucesso!"),!0}catch{return s.error("Houve um erro ao criar a iniciativa."),!1}return!1},async[h](i,t,e){if(this.validateTitle(t)&&this.validateDescription(e))try{return await a.put(`${r}/initiatives/${i}`,{title:t,description:e}),await this.FETCH_INITIATIVES(),this.FILTER_INITIATIVES(this.selectedInitiative.dimension_id),s.success("Iniciativa atualizada com sucesso!"),!0}catch(I){return this.errors.api=I.message,s.error("Houve um erro ao atualizar a iniciativa."),!1}return!1},async[E](i){try{await a.delete(`${r}/initiatives/${i}`),await this.FETCH_INITIATIVES(),this.FILTER_INITIATIVES(this.selectedInitiative.dimension_id),s.success("Iniciativa exclu\xEDda com sucesso!")}catch(t){this.errors.api=t.message,s.error("Houve um erro ao excluir a iniciativa.")}}}});export{N as u};
