import{f as j,g as C,k as w,L as U,M as S,c as m,i as t,h as a,G as k,F as v,o as d,a as n,t as V,u as _,H as Y,b as g,d as x}from"./index.2a01bdce.js";import{_ as B,b as h,D as q,E as z,a as J,F as K,G as Q}from"./auth.75b214dc.js";import{_ as W,b as X,a as Z,c as ee}from"./SectionTitleLineWithButton.6f9ec719.js";import{_ as y,a as le}from"./CardBoxModal.747049bb.js";import"./component.317f724c.js";import{_ as E}from"./BaseButtons.19f47afb.js";import{C as te,_ as r,a as oe}from"./CardBox.bca85cc1.js";import{_ as N}from"./FormField.75048a21.js";import{u as O}from"./vulnerabilitycategory.f4bc8555.js";import"./api.5a77c80b.js";const ae={class:"pt-8"},ne={class:"pt-8"},ie=n("p",null,"Ao excluir um item, suas depend\xEAncias tamb\xE9m ser\xE3o exclu\xEDdas automaticamente.",-1),re={class:"pt-8"},se=n("b",null,"verifique se a mesma j\xE1 existe",-1),ue={class:"lg:w-1 whitespace-nowrap"},de={class:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800"},me={props:{clearMethod:{type:Function}},async mounted(){this.FETCH_VULNERABILITY_CATEGORIES()},methods:{...j(O,["FETCH_VULNERABILITY_CATEGORY","FETCH_VULNERABILITY_CATEGORIES","DELETE_VULNERABILITY_CATEGORY","UPDATE_VULNERABILITY_CATEGORY","RESET_ERRORS"])},data(){return{columns:[{name:"description",title:"Descri\xE7\xE3o"}]}},components:{CardBoxComponentFooter:te}},Te=Object.assign(me,{__name:"VulnerabilityCategoryView",setup(ce){const i=O(),c=C(()=>i.errors);i.$reset();const T=C(()=>i.vulnerabilityCategories),A=w(5),f=w(0);U(T,()=>{f.value=0});const D=C(()=>{const o=T.value;if(!Array.isArray(o))return[];const e=A.value*f.value,l=e+A.value;return o.slice(e,l)}),L=C(()=>Math.ceil(T.value.length/A.value)),F=C(()=>f.value+1),G=C(()=>{const o=[];for(let e=0;e<L.value;e++)o.push(e);return o}),R=o=>{i.FETCH_VULNERABILITY_CATEGORY(o)},P=()=>{i.DELETE_VULNERABILITY_CATEGORY(i.selectedVulnerabilityCategory.id)},s=S({info:!1,new:!1,edit:!1,delete:!1}),u=o=>{s[o]=!s[o],i.RESET_ERRORS()};U(()=>i.selectedVulnerabilityCategory,o=>{Object.assign(p,{...$,...o})});const $={title:"",description:""},p=S({...$}),H=async()=>{const{description:o}=p;await i.UPDATE_VULNERABILITY_CATEGORY(i.selectedVulnerabilityCategory.id,o)&&u("edit")},M=async o=>{await i.CREATE_VULNERABILITY_CATEGORY(o)&&u("new")};return(o,e)=>(d(),m(v,null,[t(y,{modelValue:s.info,"onUpdate:modelValue":e[0]||(e[0]=l=>s.info=l),title:"Descri\xE7\xE3o"},{default:a(()=>[n("p",null,V(p.description),1)]),_:1},8,["modelValue"]),t(y,{modelValue:s.new,"onUpdate:modelValue":e[3]||(e[3]=l=>s.new=l),title:"Adicionar Nova Categoria de Vulnerabilidade",button:o.info,"is-form":"",onSubmit:e[4]||(e[4]=k(l=>M(o.description),["prevent"]))},{footer:a(()=>[n("div",ae,[t(E,null,{default:a(()=>[t(r,{label:"Confirmar",color:"info",type:"submit"}),t(r,{label:"Cancelar",color:"info",outline:"",onClick:e[2]||(e[2]=l=>u("new"))})]),_:1})])]),default:a(()=>[t(N,{label:"Descri\xE7\xE3o",help:c.value.description,error:c.value.description},{default:a(()=>[t(B,{modelValue:o.description,"onUpdate:modelValue":e[1]||(e[1]=l=>o.description=l),name:o.description,error:c.value.description},null,8,["modelValue","name","error"])]),_:1},8,["help","error"])]),_:1},8,["modelValue","button"]),t(y,{modelValue:s.edit,"onUpdate:modelValue":e[7]||(e[7]=l=>s.edit=l),title:"Editar Categoria de Vulnerabilidade",button:"warning","is-form":"",onSubmit:e[8]||(e[8]=k(l=>H(),["prevent"]))},{footer:a(()=>[n("div",ne,[t(E,null,{default:a(()=>[t(r,{label:"Confirmar",color:"warning",type:"submit"}),t(r,{label:"Cancelar",color:"warning",outline:"",onClick:e[6]||(e[6]=l=>u("edit"))})]),_:1})])]),default:a(()=>[t(N,{label:"Descri\xE7\xE3o",help:c.value.description,error:c.value.description},{default:a(()=>[t(B,{modelValue:p.description,"onUpdate:modelValue":e[5]||(e[5]=l=>p.description=l),name:p.description,error:c.value.description},null,8,["modelValue","name","error"])]),_:1},8,["help","error"])]),_:1},8,["modelValue"]),t(y,{modelValue:s.delete,"onUpdate:modelValue":e[11]||(e[11]=l=>s.delete=l),isForm:"",onSubmit:e[12]||(e[12]=k(l=>P(),["prevent"])),title:"Voc\xEA realmente quer excluir este item?",button:"danger"},{footer:a(()=>[n("div",re,[t(E,null,{default:a(()=>[t(r,{label:"Confirmar",color:"danger",type:"submit",onClick:e[9]||(e[9]=l=>u("delete"))}),t(r,{label:"Cancelar",color:"danger",outline:"",onClick:e[10]||(e[10]=l=>u("delete"))})]),_:1})])]),default:a(()=>[ie]),_:1},8,["modelValue"]),t(W,null,{default:a(()=>[t(X,null,{default:a(()=>[t(Z,{icon:_(h),title:"Categorias das Vulnerabilidades",main:""},{default:a(()=>[t(r,{icon:_(q),label:"Nova Categoria de Vulnerabilidade",color:"contrast","rounded-full":"",small:"",onClick:e[13]||(e[13]=l=>u("new"))},null,8,["icon"])]),_:1},8,["icon"]),t(le,{color:"info",icon:_(z)},{default:a(()=>[Y(" Antes de cadastrar uma nova Categoria de Vulnerabilidade, "),se,Y(". ")]),_:1},8,["icon"]),t(oe,{class:"mb-6","has-table":""},{default:a(()=>[n("table",null,[n("thead",null,[n("tr",null,[(d(!0),m(v,null,g(o.columns,l=>(d(),m("th",{key:l},V(l.title),1))),128))])]),n("tbody",null,[(d(!0),m(v,null,g(D.value,(l,I)=>(d(),m("tr",{key:I},[(d(!0),m(v,null,g(o.columns,b=>(d(),m("td",{key:b},V(l[b.name]),1))),128)),n("td",ue,[t(E,{type:"justify-start lg:justify-end","no-wrap":""},{default:a(()=>[t(r,{color:"info",icon:_(J),small:"",onClick:b=>(R(l.id),u("info"))},null,8,["icon","onClick"]),t(r,{color:"warning",icon:_(K),small:"",onClick:b=>(R(l.id),u("edit"))},null,8,["icon","onClick"]),t(r,{color:"danger",icon:_(Q),small:"",onClick:b=>(R(l.id),u("delete"))},null,8,["icon","onClick"])]),_:2},1024)])]))),128))])]),n("div",de,[t(ee,null,{default:a(()=>[t(E,null,{default:a(()=>[(d(!0),m(v,null,g(G.value,l=>(d(),x(r,{key:l,active:l===f.value,label:l+1,color:l===f.value?"lightDark":"whiteDark",small:"",onClick:I=>f.value=l},null,8,["active","label","color","onClick"]))),128))]),_:1}),n("small",null,"P\xE1gina "+V(F.value)+" de "+V(L.value),1)]),_:1})])]),_:1})]),_:1})]),_:1})],64))}});export{Te as default};
