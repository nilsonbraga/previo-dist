import{K as c,j as n}from"./index.2a01bdce.js";import{a as r}from"./api.5a77c80b.js";const a=c(),o="https://hgprevio.vicegov.ce.gov.br/api/v1",T="FETCH_ACTIONS",E="FETCH_ACTION",A="DELETE_ACTION",C="CLEAR_SELECTED_ACTION",h="UPDATE_ACTION",u="CREATE_ACTION",I="FILTER_ACTIONS",l="RESET_ACTIONS",_="RESET_ERRORS",S=n("actions",{state:()=>({actions:[],selectedAction:[],filteredActions:[],isFieldFocusRegistered:!1,errors:{}}),actions:{validateInput(t,s){const e={};return(!t||typeof t=="string"&&t.trim()==="")&&(e[s]="Campo obrigat\xF3rio"),this.errors=e,!Object.keys(e).length},async[T](){try{const t=await r.get(`${o}/actions`);this.actions=t.data}catch(t){this.errors.api=t.message}},[l](){Object.assign(this,defaultState)},[_](){this.errors={}},[I](t){this.filteredActions=this.actions;let e=this.actions.filter(i=>i.project_id==t);this.filteredActions=e},async[E](t){try{const s=await r.get(`${o}/actions/${t}`);this.selectedAction=s.data}catch(s){this.errors.api=s.message}},async[C](){this.selectedAction=[]},async[u](t,s,e){if(this.validateInput(e,"project_id")&&this.validateInput(t,"title")&&this.validateInput(s,"description"))try{return await r.post(`${o}/actions/`,{title:t,description:s,project_id:e}),await this.FETCH_ACTIONS(),this.FILTER_ACTIONS(e),a.success("A\xE7\xE3o criada com sucesso!"),!0}catch{return a.error("Houve um erro ao criar a a\xE7\xE3o."),!1}return!1},async[h](t,s,e){if(this.validateInput(s,"title")&&this.validateInput(e,"description"))try{return await r.put(`${o}/actions/${t}`,{title:s,description:e}),await this.FETCH_ACTIONS(),this.FILTER_ACTIONS(this.selectedAction.project_id),a.success("A\xE7\xE3o atualizada com sucesso!"),!0}catch(i){return this.errors.api=i.message,a.error("Houve um erro ao atualizar a a\xE7\xE3o."),!1}return!1},async[A](t){try{await r.delete(`${o}/actions/${t}`),await this.FETCH_ACTIONS(),this.FILTER_ACTIONS(this.selectedAction.project_id),a.success("A\xE7\xE3o exclu\xEDda com sucesso!")}catch(s){this.errors.api=s.message,a.error("Houve um erro ao excluir a a\xE7\xE3o.")}}}});export{S as u};
